<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EdenX Staff Admin - RESTRICTED ACCESS</title>
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --brand-a: #00e5ff;
      --brand-b: #e91e63;
      --success: #10B981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --dark: #1e1b4b;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1e1b4b 0%, #3730a3 100%);
      color: white;
      min-height: 100vh;
      padding: 0;
      margin: 0;
    }
    
    .auth-screen {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 2rem;
    }
    
    .auth-card {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 3rem;
      border: 1px solid rgba(255,255,255,0.2);
      text-align: center;
      max-width: 400px;
      width: 100%;
    }
    
    .auth-card h1 {
      color: var(--brand-a);
      margin-bottom: 1rem;
      font-size: 2rem;
    }
    
    .auth-warning {
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid var(--danger);
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 2rem;
      color: #fca5a5;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
      text-align: left;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: bold;
      color: var(--brand-a);
    }
    
    .form-group input {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 12px;
      background: rgba(255,255,255,0.1);
      color: white;
      font-size: 1rem;
    }
    
    .form-group input::placeholder {
      color: rgba(255,255,255,0.6);
    }
    
    .auth-btn {
      width: 100%;
      background: var(--brand-a);
      color: var(--dark);
      border: none;
      padding: 1rem;
      border-radius: 12px;
      font-weight: bold;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .auth-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 229, 255, 0.4);
    }
    
    .error-message {
      color: var(--danger);
      margin-top: 1rem;
      padding: 0.75rem;
      background: rgba(239, 68, 68, 0.1);
      border-radius: 8px;
      display: none;
    }
    
    /* Admin Interface (hidden initially) */
    .admin-interface {
      display: none;
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid rgba(255,255,255,0.2);
    }
    
    .admin-title {
      color: var(--brand-a);
      font-size: 2rem;
      margin: 0;
    }
    
    .logout-btn {
      background: var(--danger);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    
    .admin-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 2rem;
    }
    
    .admin-card {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 2rem;
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    .admin-card h3 {
      color: var(--brand-a);
      margin-bottom: 1.5rem;
      font-size: 1.3rem;
    }
    
    .form-group {
      margin-bottom: 1rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: bold;
      color: var(--brand-a);
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 8px;
      background: rgba(255,255,255,0.1);
      color: white;
      font-family: inherit;
      font-size: 1rem;
    }
    
    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .btn {
      background: var(--brand-a);
      color: var(--dark);
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 229, 255, 0.4);
    }
    
    .btn.danger {
      background: var(--danger);
      color: white;
    }
    
    .btn.success {
      background: var(--success);
      color: white;
    }
    
    .recent-updates {
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      padding: 1.5rem;
      margin-top: 2rem;
    }
    
    .recent-updates h4 {
      color: var(--brand-a);
      margin-bottom: 1rem;
    }
    
    .update-item {
      background: rgba(255,255,255,0.1);
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 0.75rem;
      border-left: 4px solid var(--brand-a);
    }
    
    .update-item.urgent {
      border-left-color: var(--danger);
    }
    
    .update-meta {
      font-size: 0.9rem;
      opacity: 0.8;
      margin-bottom: 0.5rem;
    }
    
    .quick-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .success-message {
      background: rgba(16, 185, 129, 0.2);
      color: #86efac;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      display: none;
    }
    
    @media (max-width: 768px) {
      .admin-grid {
        grid-template-columns: 1fr;
      }
      
      .admin-header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }
      
      .auth-screen {
        padding: 1rem;
      }
      
      .auth-card {
        padding: 2rem;
      }
    }
  </style>
</head>
<body>
  <!-- Authentication Screen -->
  <div class="auth-screen" id="authScreen">
    <div class="auth-card">
      <h1>EdenX Staff Admin</h1>
      
      <div class="auth-warning">
        <strong>‚ö†Ô∏è RESTRICTED ACCESS</strong><br>
        This page is for authorized WCED staff only.
      </div>
      
      <form onsubmit="authenticate(event)">
        <div class="form-group">
          <label for="staffId">Staff ID:</label>
          <input type="text" id="staffId" placeholder="Enter your WCED staff ID" required>
        </div>
        
        <div class="form-group">
          <label for="accessCode">Event Access Code:</label>
          <input type="password" id="accessCode" placeholder="Provided by event organizer" required>
        </div>
        
        <button type="submit" class="auth-btn">Access Admin Panel</button>
      </form>
      
      <div class="error-message" id="errorMessage">
        Invalid credentials. Contact Ashric Don for access.
      </div>
    </div>
  </div>
  
  <!-- Admin Interface (hidden until authenticated) -->
  <div class="admin-interface" id="adminInterface">
    <div class="admin-header">
      <h1 class="admin-title">Live Event Management</h1>
      <div>
        <span id="staffName" style="margin-right: 1rem; opacity: 0.8;"></span>
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>
    </div>
    
    <div class="success-message" id="successMessage">
      Update posted successfully!
    </div>
    
    <div class="admin-grid">
      <!-- Live Updates Posting -->
      <div class="admin-card">
        <h3>üì¢ Post Live Update</h3>
        
        <div class="form-group">
          <label for="updateType">Update Priority:</label>
          <select id="updateType">
            <option value="general">üîµ General Announcement</option>
            <option value="urgent">üî¥ Urgent Alert</option>
            <option value="results">üèÜ Competition Results</option>
            <option value="schedule">‚è∞ Schedule Change</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="updateRoom">Location:</label>
          <select id="updateRoom">
            <option value="general">üè¢ General/All Areas</option>
            <option value="room1">Room 1 - Drone Challenge</option>
            <option value="room2">Room 2 - Spike Prime</option>
            <option value="room3">Room 3 - Unplugged</option>
            <option value="room4">Room 4 - Innovation</option>
            <option value="room5">Room 5 - goIT Challenge</option>
            <option value="room6">Room 6 - Career Expo</option>
            <option value="registration">üìã Registration Area</option>
            <option value="catering">üçΩÔ∏è Catering/Refreshments</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="updateMessage">Message:</label>
          <textarea id="updateMessage" placeholder="Enter your live update message...&#10;&#10;Examples:&#10;‚Ä¢ Technical issue resolved in Room 4&#10;‚Ä¢ Lunch now being served&#10;‚Ä¢ Awards ceremony delayed by 15 minutes"></textarea>
        </div>
        
        <button class="btn" onclick="postLiveUpdate()">üì§ Post Update</button>
        <button class="btn success" onclick="postResultUpdate()">üèÜ Post Results</button>
      </div>
      
      <!-- Quick Actions -->
      <div class="admin-card">
        <h3>‚ö° Quick Actions</h3>
        
        <div class="quick-actions">
          <button class="btn" onclick="refreshDashboard()">üîÑ Refresh Dashboard</button>
          <button class="btn danger" onclick="sendEmergencyAlert()">üö® Emergency Alert</button>
          <button class="btn" onclick="scheduleAnnouncement()">üìÖ Schedule Change</button>
          <button class="btn success" onclick="openPublicDashboard()" target="_blank">üëÄ View Public Dashboard</button>
        </div>
        
        <div style="margin-top: 2rem;">
          <h4 style="color: var(--brand-a); margin-bottom: 1rem;">Event Status Control:</h4>
          <button class="btn success" onclick="setEventStatus('live')">üî¥ Set Event Live</button>
          <button class="btn warning" onclick="setEventStatus('break')">‚òï Set Break Time</button>
          <button class="btn danger" onclick="setEventStatus('ended')">‚úÖ Event Ended</button>
        </div>
      </div>
    </div>
    
    <!-- Recent Updates Log -->
    <div class="recent-updates">
      <h4>üìã Recent Updates Log</h4>
      <div id="updatesLog">
        <div class="update-item">
          <div class="update-meta">Posted by: System | 09:50 AM</div>
          <div>All morning competitions have started successfully across Rooms 1-5.</div>
        </div>
        
        <div class="update-item urgent">
          <div class="update-meta">Posted by: Technical Team | 09:45 AM</div>
          <div>URGENT: WiFi issue in Room 4 resolved. All teams back online.</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Simple authentication system
    const VALID_CREDENTIALS = {
      'ashric.don': 'edenx2025',
      'admin': 'festival2025',
      'tech.team': 'live2025'
    };

    function authenticate(event) {
      event.preventDefault();
      
      const staffId = document.getElementById('staffId').value.toLowerCase();
      const accessCode = document.getElementById('accessCode').value;
      const errorMessage = document.getElementById('errorMessage');
      
      if (VALID_CREDENTIALS[staffId] && VALID_CREDENTIALS[staffId] === accessCode) {
        // Authentication successful
        document.getElementById('authScreen').style.display = 'none';
        document.getElementById('adminInterface').style.display = 'block';
        document.getElementById('staffName').textContent = `Logged in: ${staffId}`;
        
        // Store auth state
        sessionStorage.setItem('edenx_auth', 'true');
        sessionStorage.setItem('edenx_user', staffId);
      } else {
        // Authentication failed
        errorMessage.style.display = 'block';
        document.getElementById('accessCode').value = '';
      }
    }

    function logout() {
      sessionStorage.removeItem('edenx_auth');
      sessionStorage.removeItem('edenx_user');
      location.reload();
    }

    // Check if already authenticated
    document.addEventListener('DOMContentLoaded', function() {
      if (sessionStorage.getItem('edenx_auth') === 'true') {
        const user = sessionStorage.getItem('edenx_user');
        document.getElementById('authScreen').style.display = 'none';
        document.getElementById('adminInterface').style.display = 'block';
        document.getElementById('staffName').textContent = `Logged in: ${user}`;
      }
    });

    // Admin functions
    function postLiveUpdate() {
      const type = document.getElementById('updateType').value;
      const room = document.getElementById('updateRoom').value;
      const message = document.getElementById('updateMessage').value.trim();
      
      if (!message) {
        alert('Please enter a message');
        return;
      }
      
      // Here you would normally send to your backend/Google Sheets
      // For now, just log and show success
      const now = new Date();
      const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
      const user = sessionStorage.getItem('edenx_user');
      
      // Add to local log
      addToUpdatesLog({
        time: timeString,
        user: user,
        type: type,
        room: room,
        message: message
      });
      
      // Clear form
      document.getElementById('updateMessage').value = '';
      
      // Show success message
      showSuccessMessage('Update posted successfully!');
      
      console.log('Posted update:', { type, room, message, user, time: timeString });
    }

    function addToUpdatesLog(update) {
      const log = document.getElementById('updatesLog');
      const newItem = document.createElement('div');
      newItem.className = `update-item ${update.type === 'urgent' ? 'urgent' : ''}`;
      
      newItem.innerHTML = `
        <div class="update-meta">Posted by: ${update.user} | ${update.time}</div>
        <div><strong>${update.room.toUpperCase()}:</strong> ${update.message}</div>
      `;
      
      log.insertBefore(newItem, log.firstChild);
    }

    function showSuccessMessage(text) {
      const msg = document.getElementById('successMessage');
      msg.textContent = text;
      msg.style.display = 'block';
      setTimeout(() => {
        msg.style.display = 'none';
      }, 3000);
    }

    function sendEmergencyAlert() {
      const message = prompt('Enter emergency alert message:');
      if (message) {
        document.getElementById('updateType').value = 'urgent';
        document.getElementById('updateRoom').value = 'general';
        document.getElementById('updateMessage').value = `üö® EMERGENCY: ${message}`;
        postLiveUpdate();
      }
    }

    function scheduleAnnouncement() {
      const message = prompt('Enter schedule change announcement:');
      if (message) {
        document.getElementById('updateType').value = 'schedule';
        document.getElementById('updateRoom').value = 'general';
        document.getElementById('updateMessage').value = message;
        postLiveUpdate();
      }
    }

    function postResultUpdate() {
      const challenge = prompt('Which challenge?\n(Innovation, Drone, goIT, Unplugged, Spike Prime)');
      if (!challenge) return;
      
      const teamName = prompt('Team name:');
      if (!teamName) return;
      
      const schoolName = prompt('School name:');
      if (!schoolName) return;
      
      const score = prompt('Score/Result:');
      if (!score) return;
      
      const position = prompt('Position (1st, 2nd, 3rd, etc.):');
      if (!position) return;
      
      document.getElementById('updateType').value = 'results';
      document.getElementById('updateMessage').value = `üèÜ ${challenge} Challenge: ${position} - ${teamName} (${schoolName}) - Score: ${score}`;
      postLiveUpdate();
    }

    function refreshDashboard() {
      showSuccessMessage('Dashboard refreshed!');
      // Here you would trigger a refresh of the public dashboard data
    }

    function setEventStatus(status) {
      const messages = {
        'live': 'üî¥ Event is now LIVE!',
        'break': '‚òï Break time - event will resume shortly',
        'ended': '‚úÖ Event has ended. Thank you for participating!'
      };
      
      document.getElementById('updateType').value = 'general';
      document.getElementById('updateRoom').value = 'general';
      document.getElementById('updateMessage').value = messages[status];
      postLiveUpdate();
    }

    function openPublicDashboard() {
      window.open('live.html', '_blank');
    }

    // Auto-save draft messages
    document.getElementById('updateMessage').addEventListener('input', function() {
      sessionStorage.setItem('edenx_draft', this.value);
    });

    // Restore draft on load
    document.addEventListener('DOMContentLoaded', function() {
      const draft = sessionStorage.getItem('edenx_draft');
      if (draft) {
        document.getElementById('updateMessage').value = draft;
      }
    });
  </script>
</body>
</html>
